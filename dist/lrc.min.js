/*
* Lrc.js v1.0.0
* (c) 2018 Ryan Gao
* Released under the MIT License.
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}var n=["ti","al","ar","au","by","offset","length","re","ve"],i=/^\[[^:]+:[^\]]*\]/,r=/\[(\d+):(\d+)(?:.(\d+))?\]/,o=/\[(\d+):(\d+)(?:.(\d+))?\]/g,a=/\[([a-z]+):([^\]]*)\]/,u=function(){function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),"string"==typeof t)return u.parse(t);this.clone(t)}var f,l,s;return f=u,s=[{key:"parse",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(/\n/).map(function(t){return t.trim()}).filter(function(t){return i.test(t)}).reduce(function(t,i){if(o.test(i)){var u=i.replace(o,"").trim();i.match(o).forEach(function(n){var i=e(n.match(r),4),o=i[1],a=i[2],f=i[3],l=60*o+1*a+(f=f?f.length>2?1*f:10*f:0)/1e3;t.lines.push({time:l,text:u})})}else if(a.test(i)){var f=e(i.match(a),3),l=f[1],s=f[2];if(l=l.trim(),s=s.trim(),n.indexOf(l)>-1)if("offset"!==l)t[l]=s||"";else{var c=1*s;t[l]=isNaN(c)?0:c}}return t},{al:"",ar:"",au:"",ti:"",by:"",offset:0,length:"",re:"",ve:"",lines:[]});return t.lines.sort(function(t,e){return t.time-e.time}),new u(t)}}],(l=[{key:"clone",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.forEach(function(n){t[n]=e[n]||""}),this.offset=e.offset||0,this.lines=Array.isArray(e.lines)?e.lines.map(function(t){return{time:t.time,text:t.text}}):[],this}},{key:"stringify",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,i=n.filter(function(e){return!!t[e]}).map(function(e){return"offset"===e?"[".concat(e,":").concat(t[e]>0?"+":"-").concat(Math.abs(t[e]),"]"):"[".concat(e,":").concat(t[e],"]")}).join("\n");return i+="\n",(i+=this.lines.map(function(t){var n=Math.floor(t.time/60),i=Math.floor(t.time%60),r=t.time-Math.floor(t.time);for(n=n<10?"0"+n:""+n,i=i<10?"0"+i:""+i,r=Math.round(r*Math.pow(10,e))+"";r.length<e;)r="0"+r;return"[".concat(n,":").concat(i,".").concat(r,"]").concat(t.text)}).join("\n")).trim()}},{key:"toJSON",value:function(){var t=this,e={};return n.forEach(function(n){e[n]=t[n]}),e.lines=this.lines.map(function(t){return{time:t.time,text:t.text}}),e}},{key:"findIndex",value:function(t){for(var e=-1,n=0;n<this.lines.length;n++)if(this.lines[n].time>t){e=n;break}return e<0?this.lines.length-1:e-1}},{key:"previousLine",value:function(t){var e=this.findIndex(t);return e<=0?null:{idx:e-1,time:this.lines[e-1].time,text:this.lines[e-1].text}}},{key:"currentLine",value:function(t){var e=this.findIndex(t);return e<0?null:{idx:e,time:this.lines[e].time,text:this.lines[e].text}}},{key:"nextLine",value:function(t){var e=this.findIndex(t);return e<this.lines.length-1?{idx:e+1,time:this.lines[e+1].time,text:this.lines[e+1].text}:null}}])&&t(f.prototype,l),s&&t(f,s),u}();module.exports=u});
